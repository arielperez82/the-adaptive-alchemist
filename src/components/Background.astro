---
// Background.astro - Dot pattern and ambient glow background with smooth theme transitions
---

<div class="fixed inset-0 -z-10 overflow-hidden transition-all duration-300">
  <div
    class="absolute inset-0 bg-[radial-gradient(circle,rgb(0_0_0_/_15%)_1px,transparent_1px)] bg-[length:24px_24px] bg-[center_top_-1px] transition-all duration-700 [mask-image:radial-gradient(white,transparent_85%)] dark:bg-[radial-gradient(circle,rgb(255_255_255_/_10%)_1px,transparent_1px)]"
  >
  </div>

  <div
    class="absolute left-1/4 top-1/4 h-96 w-96 -translate-x-1/2 -translate-y-1/2 animate-glow rounded-full bg-zinc-400/20 opacity-50 blur-3xl transition-all duration-700 dark:bg-zinc-500/20"
  >
  </div>
  <div
    class="absolute bottom-1/3 right-1/4 h-64 w-64 translate-x-1/2 translate-y-1/2 animate-glow rounded-full bg-zinc-300/20 opacity-40 blur-3xl transition-all delay-1000 duration-700 dark:bg-zinc-600/20"
  >
  </div>

  <div
    id="theme-transition-overlay"
    class="pointer-events-none absolute inset-0 bg-white opacity-0 transition-opacity duration-300 dark:bg-zinc-900"
  >
  </div>
</div>

<script>
  // Enhanced theme transition script
  document.addEventListener('DOMContentLoaded', () => {
    const themeToggle = document.querySelector('[data-theme-toggle]')
    const overlay = document.getElementById('theme-transition-overlay')

    if (themeToggle && overlay) {
      themeToggle.addEventListener('click', () => {
        // Add transitioning class to optimize performance
        document.documentElement.classList.add('theme-transitioning')

        // Fade in overlay
        overlay.style.opacity = '0.15'

        setTimeout(() => {
          // Fade out overlay
          overlay.style.opacity = '0'

          // Remove transitioning class after animation completes
          setTimeout(() => {
            document.documentElement.classList.remove('theme-transitioning')
          }, 700)
        }, 300)
      })
    }
  })
</script>
